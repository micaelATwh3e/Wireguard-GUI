{% extends "base.html" %}

{% block title %}Edit User - WireGuard Manager{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px; margin: 50px auto;">
    <div class="header">
        <h1>✏️ Edit User: {{ user.username }}</h1>
        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">← Back</a>
    </div>
    
    <form method="POST" action="{{ url_for('edit_user', user_id=user.id) }}">
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" value="{{ user.username }}" disabled 
                   style="background: #f0f0f0; cursor: not-allowed;">
            <small style="color: #777; font-size: 12px;">Username cannot be changed</small>
        </div>
        
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" value="{{ user.email or '' }}" 
                   placeholder="user@example.com">
        </div>
        
        <div class="form-group">
            <label for="password">New Password (leave empty to keep current)</label>
            <input type="password" id="password" name="password" minlength="6"
                   placeholder="Enter new password to change">
        </div>
        
        <div class="form-group">
            <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" name="is_active" {% if user.is_active %}checked{% endif %}
                       style="width: auto; margin-right: 10px;">
                <span>Account Active</span>
            </label>
            <small style="color: #777; font-size: 12px;">Uncheck to disable user access without deleting</small>
        </div>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
            <h3 style="margin-bottom: 10px; color: #333; font-size: 16px;">WireGuard Configuration</h3>
            <p style="color: #666; font-size: 13px; margin: 5px 0;">
                <strong>IP Address:</strong> <code style="background: white; padding: 2px 6px; border-radius: 3px;">{{ user.wg_ip_address }}</code>
            </p>
            <p style="color: #666; font-size: 13px; margin: 5px 0;">
                <strong>Public Key:</strong> <code style="background: white; padding: 2px 6px; border-radius: 3px; font-size: 11px; word-break: break-all;">{{ user.wg_public_key }}</code>
            </p>
        </div>
        
        <div class="form-group">
            <button type="submit" class="btn btn-success" style="width: 100%;">
                Update User
            </button>
        </div>
    </form>
</div>
{% endblock %}
